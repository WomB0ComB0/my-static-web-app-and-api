{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"./product.service\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"../shared/list-header.component\";\nimport * as i4 from \"../shared/modal.component\";\nimport * as i5 from \"./product-list.component\";\nimport * as i6 from \"./product-detail.component\";\nfunction ProductsComponent_div_3_app_product_list_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"app-product-list\", 8);\n    i0.ɵɵlistener(\"selected\", function ProductsComponent_div_3_app_product_list_1_Template_app_product_list_selected_0_listener($event) {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r4 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r4.select($event));\n    })(\"deleted\", function ProductsComponent_div_3_app_product_list_1_Template_app_product_list_deleted_0_listener($event) {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r6 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r6.askToDelete($event));\n    });\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const products_r1 = i0.ɵɵnextContext().ngIf;\n    i0.ɵɵproperty(\"products\", products_r1);\n  }\n}\nfunction ProductsComponent_div_3_app_product_detail_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r9 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"app-product-detail\", 9);\n    i0.ɵɵlistener(\"unselect\", function ProductsComponent_div_3_app_product_detail_2_Template_app_product_detail_unselect_0_listener() {\n      i0.ɵɵrestoreView(_r9);\n      const ctx_r8 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r8.clear());\n    })(\"save\", function ProductsComponent_div_3_app_product_detail_2_Template_app_product_detail_save_0_listener($event) {\n      i0.ɵɵrestoreView(_r9);\n      const ctx_r10 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r10.save($event));\n    });\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"product\", ctx_r3.selected);\n  }\n}\nfunction ProductsComponent_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 5);\n    i0.ɵɵtemplate(1, ProductsComponent_div_3_app_product_list_1_Template, 1, 1, \"app-product-list\", 6)(2, ProductsComponent_div_3_app_product_detail_2_Template, 1, 1, \"app-product-detail\", 7);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", !ctx_r0.selected);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.selected);\n  }\n}\nexport class ProductsComponent {\n  constructor(productService) {\n    this.productService = productService;\n    this.message = '?';\n    this.showModal = false;\n    this.products$ = productService.entities$;\n  }\n  ngOnInit() {\n    this.getProducts();\n  }\n  add(product) {\n    this.productService.add(product, {\n      isOptimistic: false\n    });\n  }\n  askToDelete(product) {\n    this.productToDelete = product;\n    this.showModal = true;\n    if (this.productToDelete.name) {\n      this.message = `Would you like to delete ${this.productToDelete.name}?`;\n    }\n  }\n  clear() {\n    this.selected = null;\n  }\n  closeModal() {\n    this.showModal = false;\n  }\n  deleteProduct() {\n    this.closeModal();\n    if (this.productToDelete) {\n      this.productService.delete(this.productToDelete.id).subscribe(() => this.productToDelete = null);\n    }\n    this.clear();\n  }\n  enableAddMode() {\n    this.selected = {};\n  }\n  getProducts() {\n    this.productService.getAll();\n    this.clear();\n  }\n  save(product) {\n    if (this.selected && this.selected.name) {\n      this.update(product);\n    } else {\n      this.add(product);\n    }\n  }\n  select(product) {\n    this.selected = product;\n  }\n  update(product) {\n    this.productService.update(product);\n  }\n  static #_ = this.ɵfac = function ProductsComponent_Factory(t) {\n    return new (t || ProductsComponent)(i0.ɵɵdirectiveInject(i1.ProductService));\n  };\n  static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: ProductsComponent,\n    selectors: [[\"app-products\"]],\n    decls: 6,\n    vars: 5,\n    consts: [[1, \"content-container\"], [\"title\", \"Products\", 3, \"add\", \"refresh\"], [1, \"columns\", \"is-multiline\", \"is-variable\"], [\"class\", \"column is-8\", 4, \"ngIf\"], [1, \"modal-product\", 3, \"message\", \"isOpen\", \"handleNo\", \"handleYes\"], [1, \"column\", \"is-8\"], [3, \"products\", \"selected\", \"deleted\", 4, \"ngIf\"], [3, \"product\", \"unselect\", \"save\", 4, \"ngIf\"], [3, \"products\", \"selected\", \"deleted\"], [3, \"product\", \"unselect\", \"save\"]],\n    template: function ProductsComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"app-list-header\", 1);\n        i0.ɵɵlistener(\"add\", function ProductsComponent_Template_app_list_header_add_1_listener() {\n          return ctx.enableAddMode();\n        })(\"refresh\", function ProductsComponent_Template_app_list_header_refresh_1_listener() {\n          return ctx.getProducts();\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(2, \"div\", 2);\n        i0.ɵɵtemplate(3, ProductsComponent_div_3_Template, 3, 2, \"div\", 3);\n        i0.ɵɵpipe(4, \"async\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(5, \"app-modal\", 4);\n        i0.ɵɵlistener(\"handleNo\", function ProductsComponent_Template_app_modal_handleNo_5_listener() {\n          return ctx.closeModal();\n        })(\"handleYes\", function ProductsComponent_Template_app_modal_handleYes_5_listener() {\n          return ctx.deleteProduct();\n        });\n        i0.ɵɵelementEnd()();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngIf\", i0.ɵɵpipeBind1(4, 3, ctx.products$));\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"message\", ctx.message)(\"isOpen\", ctx.showModal);\n      }\n    },\n    dependencies: [i2.NgIf, i3.ListHeaderComponent, i4.ModalComponent, i5.ProductListComponent, i6.ProductDetailComponent, i2.AsyncPipe],\n    encapsulation: 2\n  });\n}","map":{"version":3,"names":["i0","ɵɵelementStart","ɵɵlistener","ProductsComponent_div_3_app_product_list_1_Template_app_product_list_selected_0_listener","$event","ɵɵrestoreView","_r5","ctx_r4","ɵɵnextContext","ɵɵresetView","select","ProductsComponent_div_3_app_product_list_1_Template_app_product_list_deleted_0_listener","ctx_r6","askToDelete","ɵɵelementEnd","ɵɵproperty","products_r1","ProductsComponent_div_3_app_product_detail_2_Template_app_product_detail_unselect_0_listener","_r9","ctx_r8","clear","ProductsComponent_div_3_app_product_detail_2_Template_app_product_detail_save_0_listener","ctx_r10","save","ctx_r3","selected","ɵɵtemplate","ProductsComponent_div_3_app_product_list_1_Template","ProductsComponent_div_3_app_product_detail_2_Template","ɵɵadvance","ctx_r0","ProductsComponent","constructor","productService","message","showModal","products$","entities$","ngOnInit","getProducts","add","product","isOptimistic","productToDelete","name","closeModal","deleteProduct","delete","id","subscribe","enableAddMode","getAll","update","_","ɵɵdirectiveInject","i1","ProductService","_2","selectors","decls","vars","consts","template","ProductsComponent_Template","rf","ctx","ProductsComponent_Template_app_list_header_add_1_listener","ProductsComponent_Template_app_list_header_refresh_1_listener","ProductsComponent_div_3_Template","ProductsComponent_Template_app_modal_handleNo_5_listener","ProductsComponent_Template_app_modal_handleYes_5_listener","ɵɵpipeBind1"],"sources":["C:\\Users\\Mike Odnis\\Documents\\GitHub\\my-static-web-app-and-api\\angular-app\\src\\app\\products\\products.component.ts"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\r\nimport { Observable } from 'rxjs';\r\nimport { Product } from '../core';\r\nimport { ProductService } from './product.service';\r\n\r\n@Component({\r\n  selector: 'app-products',\r\n  template: `\r\n    <div class=\"content-container\">\r\n      <app-list-header\r\n        title=\"Products\"\r\n        (add)=\"enableAddMode()\"\r\n        (refresh)=\"getProducts()\"\r\n      ></app-list-header>\r\n      <div class=\"columns is-multiline is-variable\">\r\n        <div class=\"column is-8\" *ngIf=\"products$ | async as products\">\r\n          <app-product-list\r\n            *ngIf=\"!selected\"\r\n            [products]=\"products\"\r\n            (selected)=\"select($event)\"\r\n            (deleted)=\"askToDelete($event)\"\r\n          ></app-product-list>\r\n          <app-product-detail\r\n            *ngIf=\"selected\"\r\n            [product]=\"selected\"\r\n            (unselect)=\"clear()\"\r\n            (save)=\"save($event)\"\r\n          ></app-product-detail>\r\n        </div>\r\n      </div>\r\n\r\n      <app-modal\r\n        class=\"modal-product\"\r\n        [message]=\"message\"\r\n        [isOpen]=\"showModal\"\r\n        (handleNo)=\"closeModal()\"\r\n        (handleYes)=\"deleteProduct()\"\r\n      ></app-modal>\r\n    </div>\r\n  `,\r\n})\r\nexport class ProductsComponent implements OnInit {\r\n  selected: Product;\r\n  products$: Observable<Product[]>;\r\n  message = '?';\r\n  productToDelete: Product;\r\n  showModal = false;\r\n\r\n  constructor(private productService: ProductService) {\r\n    this.products$ = productService.entities$;\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.getProducts();\r\n  }\r\n\r\n  add(product: Product) {\r\n    this.productService.add(product, {isOptimistic: false});\r\n  }\r\n\r\n  askToDelete(product: Product) {\r\n    this.productToDelete = product;\r\n    this.showModal = true;\r\n    if (this.productToDelete.name) {\r\n      this.message = `Would you like to delete ${this.productToDelete.name}?`;\r\n    }\r\n  }\r\n\r\n  clear() {\r\n    this.selected = null;\r\n  }\r\n\r\n  closeModal() {\r\n    this.showModal = false;\r\n  }\r\n\r\n  deleteProduct() {\r\n    this.closeModal();\r\n    if (this.productToDelete) {\r\n      this.productService\r\n        .delete(this.productToDelete.id)\r\n        .subscribe(() => (this.productToDelete = null));\r\n    }\r\n    this.clear();\r\n  }\r\n\r\n  enableAddMode() {\r\n    this.selected = <any>{};\r\n  }\r\n\r\n  getProducts() {\r\n    this.productService.getAll();\r\n    this.clear();\r\n  }\r\n\r\n  save(product: Product) {\r\n    if (this.selected && this.selected.name) {\r\n      this.update(product);\r\n    } else {\r\n      this.add(product);\r\n    }\r\n  }\r\n\r\n  select(product: Product) {\r\n    this.selected = product;\r\n  }\r\n\r\n  update(product: Product) {\r\n    this.productService.update(product);\r\n  }\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}